import ("pager")
import ("file")

const exists = file_exists

var p

if __argc is 1 {
  p = Pager.new_from_stdin ()
} else {
  var file = __argv[1]
  ifnot file: exists () then exit (1)

  var lines = file: file_readlines ()
  if lines is null or lines: len () is 0 then exit (1)
  p = Pager.new (lines)
}

if null is p then exit (1)

exit (Pager.main (p))
